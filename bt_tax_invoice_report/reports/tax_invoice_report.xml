<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template inherit_id="account.report_invoice_document" id="report_invoice_document">
        <xpath expr="/t" position="replace">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <div class="article o.report_layout_standard"
                         t-att-data-oe-model="doc and doc._name" t-att-data-oe-id="doc and doc.id">
                        <t t-call="bt_tax_invoice_report.tax_invoice_header"/>
                        <div class="page">
                            <t t-set="company" t-value="doc.company_id"/>
                            <t t-set="doc" t-value="doc.with_context(lang=doc.partner_id.lang)"/>
                            <table style="width: 100%;border-collapse:separate;">
                                <tr>
                                    <td style="width:38%;text-align: center;font-size:25px">
                                        <span style="margin: 1px;text-decoration: underline;">
                                            <b>
                                                <span>TAX INVOICE</span>
                                            </b>
                                        </span>
                                    </td>
                                </tr>
                            </table>

                            <table style="width: 100%; border-collapse: separate;" class="table-borderless">
                                <tr>
                                    <!-- Left section with Invoice No and Date -->
                                    <td style="width: 50%; vertical-align: top;">
                                        <table style="width: 100%; border-collapse: collapse;">
                                            <tr>
                                                <td style="padding-bottom: 20px;">
                                                    <table style="width: 60%; border: 2px solid black; border-collapse: separate;">
                                                        <tr>
                                                            <td style="border: none; padding: 5px;">
                                                                <t t-if="doc.name">
                                                                    <strong>Invoice No :
                                                                        <span t-field="doc.name"/>
                                                                    </strong>
                                                                </t>

                                                            </td>
                                                            <!--                                                        <td style="border: none; padding: 5px;"></td>-->
                                                        </tr>
                                                        <tr>
                                                            <td style="border: none; padding-left: 5px;">
                                                                <t t-if="doc.invoice_date">
                                                                    <strong>Invoice Date :
                                                                        <span t-field="doc.invoice_date"/>
                                                                    </strong>
                                                                </t>

                                                            </td>
                                                            <!--                                                        <td style="border: none; padding: 5px;"></td>-->
                                                        </tr>
                                                    </table>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="padding-bottom: 20px;">
                                                    <table style="width: 100%; border: 2px solid black; border-collapse: collapse;">
                                                        <tr>
                                                            <td style="border: none; padding: 5px;" colspan="2">
                                                                <strong>BILL TO PARTY</strong>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="border-right: 2px solid black; padding-left: 5px;">
                                                                <t t-if="doc.partner_id">
                                                                    <strong>Name:
                                                                        <span t-field="doc.partner_id"/>
                                                                    </strong>
                                                                </t>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="border-right: 2px solid black; padding: 5px;">
                                                                <t t-if="doc.partner_id.street">
                                                                    <strong>Address:
                                                                        <span t-field="doc.partner_id.street"/>,
                                                                    </strong>
                                                                </t>
                                                                <t t-if="doc.partner_id.street2">
                                                                    <strong>
                                                                        <span t-field="doc.partner_id.street2"/>
                                                                    </strong>
                                                                </t>
                                                                <strong>
                                                                    <t t-if="doc.partner_id.city,doc.partner_id.country_id">
                                                                    </t>
                                                                </strong>
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td style="border-right: 2px solid black; padding: 5px;">
                                                                <t t-if="doc.partner_id.email">
                                                                    <strong>E:
                                                                        <span t-field="doc.partner_id.email"/>
                                                                    </strong>
                                                                </t>
                                                            </td>
                                                            <!--                                                        <td style="border: none; padding: 5px;"></td>-->
                                                        </tr>
                                                        <tr>
                                                            <td style="border-right: 2px solid black; padding: 5px;">
                                                                <t t-if="doc.partner_id.vat">
                                                                    <strong>TRN :
                                                                        <span t-field="doc.partner_id.vat"/>
                                                                    </strong>
                                                                </t>
                                                            </td>
                                                            <!--                                                        <td style="border: none; padding: 5px;"></td>-->
                                                        </tr>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>

                                    <!-- Right section with Currency, Project, Location, etc. -->
                                    <td style="width: 50%; vertical-align: top;">
                                        <table style="width: 100%; border-collapse: collapse;">
                                            <tr>
                                                <td style="padding-bottom: 20px;">
                                                    <table align="right"
                                                           style="width: 60%; border: 2px solid black; border-collapse: collapse;">
                                                        <tr>
                                                            <td style="border: none; padding: 5px;">
                                                                <t t-if="doc.currency_id.symbol">
                                                                    <strong>Currency :
                                                                        <span t-field="doc.currency_id"/>
                                                                    </strong>
                                                                </t>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="border: none; padding: 5px;">
                                                                <t t-if="doc.project_name">
                                                                    <strong>Project Name :
                                                                        <span t-field="doc.project_name"/>
                                                                    </strong>
                                                                </t>
                                                            </td>
                                                            <!--                                                        <td style="border: none; padding: 5px;"></td>-->
                                                        </tr>
                                                        <tr>
                                                            <td style="border: none; padding: 5px;">
                                                                <t t-if="doc.location">
                                                                    <strong>Location:
                                                                        <span t-field="doc.location"/>
                                                                    </strong>
                                                                </t>


                                                            </td>
                                                            <!--                                                        <td style="border: none; padding: 5px;"></td>-->
                                                        </tr>
                                                        <tr>
                                                            <td style="border: none; padding: 5px;">
                                                                <t t-if="doc.invoice_date_due">
                                                                    <strong>Due Date :
                                                                        <span t-field="doc.invoice_date_due"/>
                                                                    </strong>
                                                                </t>
                                                            </td>
                                                            <!--                                                        <td style="border: none; padding: 5px;"></td>-->
                                                        </tr>
                                                        <tr>
                                                            <td style="border: none; padding: 5px;">
                                                                <t t-if="doc.invoice_payment_term_id">
                                                                    <strong>Payment Terms :
                                                                        <span t-field="doc.invoice_payment_term_id"/>
                                                                    </strong>
                                                                </t>

                                                            </td>
                                                            <!--                                                        <td style="border: none; padding: 5px;"></td>-->
                                                        </tr>
                                                    </table>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="padding-bottom: 20px;">
                                                    <table align="right"
                                                           style="width: 60%; border: 2px solid black; border-collapse: collapse;">
                                                        <tr>
                                                            <td style="border: none; padding: 5px;">
                                                                <!--                                                            <t t-if="doc.contract_ref">-->
                                                                <strong>Contract Ref:
                                                                    <span t-field="doc.contract_ref"/>
                                                                </strong>
                                                                <!--                                                            </t>-->
                                                            </td>

                                                        </tr>
                                                        <tr>
                                                            <td style="border: none; padding: 5px;">
                                                                <!--                                                            <t t-if="doc.customer_lpo">-->
                                                                <strong>Customer LPO #:
                                                                    <span t-field="doc.customer_lpo"/>
                                                                </strong>
                                                                <!--                                                            </t>-->
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>

                            <div style="height: 5px;"></div>

                            <table style="width: 100%;border: 1px solid black;">
                                <thead>
                                    <tr style="height:40%;">
                                        <th style="border-left: 1px solid black; padding: 5px; text-align: center;border-collapse: collapse;">
                                            <span>Sr. No.</span>
                                        </th>
                                        <th style="border-left: 1px solid black; padding: 5px; text-align: center; border-bottom: none;border-collapse: collapse;">
                                            <span>Description</span>
                                        </th>
                                        <th style="border-left: 1px solid black; padding: 5px; text-align: center; border-bottom: none;border-collapse: collapse;">
                                            <span>QTY</span>
                                        </th>
                                        <th style="border-left: 1px solid black; padding: 5px; text-align: center; border-bottom: none;border-collapse: collapse;">
                                            <span>Rate</span>
                                        </th>
                                        <th style="border-left: 1px solid black; padding: 5px; text-align: center; border-bottom: none;border-collapse: collapse;">
                                            <span>Amount</span>
                                        </th>
                                        <th style="border-left: 1px solid black; padding: 5px; text-align: center; border-bottom: none;border-collapse: collapse;">
                                            <span>Discount</span>
                                        </th>
                                        <th style="border-left: 1px solid black; padding: 5px; text-align: center; border-bottom: none;border-collapse: collapse;">
                                            <span>Taxable Value</span>
                                        </th>
                                        <th colspan="2"
                                            style="border: 1px solid black; padding: 5px; text-align: center; border-bottom: none;border-collapse: collapse;">
                                            <span>VAT</span>
                                        </th>
                                        <th style="border: 1px solid black; padding: 5px; text-align: center; border-bottom: none;border-collapse: collapse;">
                                            <span>Total</span>
                                        </th>
                                    </tr>
                                    <tr>
                                        <th style="border: 1px solid black; padding: 5px; border-top: none;border-right:1px solid black"></th>
                                        <th style="border: 1px solid black; padding: 5px; border-top: none;border-right:1px solid black"></th>
                                        <th style="border: 1px solid black; padding: 5px; border-top: none;border-right:1px solid black"></th>
                                        <th style="border: 1px solid black; padding: 5px; border-top: none;border-right:1px solid black"></th>
                                        <th style="border: 1px solid black; padding: 5px; border-top: none;border-right:1px solid black"></th>
                                        <th style="border: 1px solid black; padding: 5px; border-top: none;border-right:1px solid black"></th>
                                        <th style="border: 1px solid black; padding: 5px; border-top: none;border-right:1px solid black"></th>

                                        <!--                                    <th colspan="7"-->
                                        <!--                                        style="border: 1px solid black; padding: 5px; border-top: none;">-->
                                        <!--                                        -->
                                        <!--                                    </th>-->
                                        <th style="border: 1px solid black; padding: 5px; text-align: center;">
                                            %
                                        </th>
                                        <th style="border: 1px solid black; padding: 5px; text-align: center;">
                                            Amount
                                        </th>
                                        <th style="border: 1px solid black; padding: 5px; border-top: none;"></th>
                                    </tr>
                                </thead>

                                <tbody class="tax_tbody">
                                    <!--                                <t t-foreach="doc.line_ids" t-as="line">-->
                                    <t t-set="i" t-value="1"/>
                                    <t t-set="total_amount" t-value="0.0"/>
                                    <t t-set="total_discount"
                                       t-value="0.0"/>
                                    <t t-set="total_taxable_value"
                                       t-value="0.0"/>
                                    <t t-set="total_vat" t-value="0.0"/>
                                    <t t-set="total_final"
                                       t-value="0.0"/>

                                    <t t-foreach="doc.invoice_line_ids"
                                       t-as="line">
                                        <tr>
                                            <td style="border: 1px solid black; padding: 5px; text-align: center;">
                                                <t t-esc="i"/>
                                                <t t-set="i" t-value="i + 1"/>
                                            </td>
                                            <td style="border: 1px solid black; padding: 5px;">
                                                <span t-field="line.name"/>
                                            </td>
                                            <td style="border: 1px solid black; padding: 5px; text-align: center;">
                                                <span t-field="line.quantity"/>
                                            </td>
                                            <td style="border: 1px solid black; padding: 5px; text-align: right;">
                                                <span t-field="line.price_unit"/>
                                            </td>
                                            <td style="border: 1px solid black; padding: 5px; text-align: right;">
                                                <!--                                                <span t-field="line.price_subtotal"/>-->
                                                <span t-field="line.price_unit"/>
                                                <t t-set="total_amount"
                                                   t-value="total_amount + line.price_unit"/>
                                            </td>
                                            <td style="border: 1px solid black; padding: 5px; text-align: right;">
                                                <span t-field="line.discount"/>
                                                <t t-set="total_discount"
                                                   t-value="total_discount + (line.discount or 0.0)"/>
                                            </td>
                                            <td style="border: 1px solid black; padding: 5px; text-align: right;">
                                                <span t-field="line.l10n_ae_vat_amount"/>
                                                <t t-set="total_taxable_value"
                                                   t-value="total_taxable_value + (line.l10n_ae_vat_amount or 0.0)"/>
                                            </td>
                                            <td style="border: 1px solid black; padding: 5px; text-align: center;">
                                                <span t-field="line.tax_ids"/>
                                            </td>
                                            <td style="border: 1px solid black; padding: 5px; text-align: right;">
                                                <span t-field="line.l10n_ae_vat_amount"/>
                                            </td>
                                            <td style="border: 1px solid black; padding: 5px; text-align: right;">
                                                <span t-field="line.price_total"/>
                                                <t t-set="total_final" t-value="total_final + (line.price_total)"/>
                                            </td>
                                        </tr>
                                    </t>

                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="2"
                                            style="border: 1px solid black; padding: 5px; text-align: center;">
                                            Total
                                        </td>
                                        <td style="border: 1px solid black; padding: 5px; text-align: right;"/>
                                        <td style="border: 1px solid black; padding: 5px; text-align: right;"/>
                                        <td style="border: 1px solid black; padding: 5px; text-align: right;">
                                            <t t-esc="'{:,.2f}'.format(total_amount)"/>
                                        </td>
                                        <td style="border: 1px solid black; padding: 5px; text-align: right;">
                                            <t t-esc="'{:,.2f}'.format(total_discount)"/>
                                        </td>
                                        <td style="border: 1px solid black; padding: 5px; text-align: right;">
                                            <t t-esc="'{:,.2f}'.format(total_taxable_value)"/>
                                        </td>
                                        <td style="border: 1px solid black; padding: 5px; text-align: center;">5%</td>
                                        <td style="border: 1px solid black; padding: 5px; text-align: right;">
                                            <t t-esc="'{:,.2f}'.format(total_taxable_value)"/>
                                        </td>
                                        <td style="border: 1px solid black; padding: 5px; text-align: right;">
                                            <t t-esc="'{:,.2f}'.format(total_final)"/>
                                        </td>
                                    </tr>
                                </tfoot>
                            </table>
                            <div style="height: 20%;padding-top: 20px;">
                                <!--                                <table style="width: 95%;border: 2px solid black;page-break-inside: avoid; table-layout: fixed;">-->
                                <table style="width: 100%; border: 2px solid black; border-collapse: collapse;">
                                    <tr>
                                        <!-- Left Table: Total Amount in Words -->
                                        <td style="width: 50%; vertical-align: top; border: 0;border-right:2px solid black;">
                                            <table style="width: 100%; padding-top: 20px; page-break-inside: avoid; border: 0;"
                                                   class="table-borderless">
                                                <tr>
                                                    <td align="left"
                                                        style="padding: 5px; height: 75px; border: 0;">
                                                        <strong>Total Amount in Words:</strong>
                                                    </td>
                                                    <td style="padding: 5px; border: 0;">
                                                        <!-- Convert the total amount into words -->
                                                        <!-- <span t-esc="doc.currency_id.amount_to_text(total_final)"/> -->
                                                        <span t-field="doc.amount_total_words"/>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>

                                        <!-- Right Table: Financial Summary -->
                                        <td style="width: 50%; vertical-align: top; border: 0;">
                                            <table style="width: 100%; padding-top: 20px; page-break-inside: avoid; border: 0;"
                                                   class="table-borderless">
                                                <tr>
                                                    <td align="right"
                                                        style="padding: 5px; white-space: nowrap; border: 0;">
                                                        <strong>Total Amount Before Tax (Taxable)</strong>
                                                    </td>
                                                    <td style="padding: 5px; text-align: right; border: 0;">
                                                        <span t-field="doc.amount_untaxed"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td align="right"
                                                        style="padding: 5px; white-space: nowrap; border: 0;">
                                                        <strong>VAT @ 5%</strong>
                                                    </td>
                                                    <td style="padding: 5px; text-align: right; border: 0;">
                                                        <span t-field="doc.amount_tax"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style="padding: 5px; white-space: nowrap; border: 0;">
                                                        <strong>Nett Amount Payable including Value Added Tax</strong>
                                                    </td>
                                                    <td style="padding: 5px; text-align: right; border: 0;">
                                                        <span t-field="doc.amount_total_signed"/>

                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div style="padding-top: 20px;">
                                <table style="width: 100%; page-break-inside: avoid;" class="table-borderless">
                                    <table align="left" style="width: 50%;padding-top: 2px; page-break-inside: avoid;"
                                           class="table-borderless">
                                        <tr>
                                            <td style="padding-top: 2px">
                                                <b>Terms &amp; Conditions : As agreed</b>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 20px;">
                                                <p>
                                                    <b>Declaration :</b>
                                                    We certify that the particulars given above are true and correct to
                                                    the
                                                    best
                                                    of our knowledge.
                                                </p>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 20px;">
                                                <p>
                                                    <b>Notes :</b>
                                                    In case of any discrepancy notify us within 7 days otherwise no
                                                    claim
                                                    will
                                                    be entertained.
                                                </p>
                                            </td>
                                        </tr>

                                    </table>
                                    <table align="right" style="width: 50%;" class="table-borderless">
                                        <tr>
                                            <td style="padding-top: 40px;">
                                                <table align="right"
                                                       style="border: 2px solid black;" class="table-borderless">
                                                    <tr>
                                                        <td style="text-align: center;text-decoration: underline; font-size: 12px;white-space: nowrap;padding-bottom: 150px;padding-top: 3px;padding-right:10px;padding-left:10px;">
                                                            <b>DYNAMIC CONTRACTING EQUIPMENT - SIGNATURE AND STAMP</b>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                        </tr>

                                    </table>
                                </table>
                            </div>
                            <div style="padding-top: 20px;">
                                <table style="width: 100%; page-break-inside: avoid;" class="table-borderless">
                                    <tr>
                                        <td style="padding-top: 40px;">
                                            <table align="left"
                                                   style="width: 55%;border: 2px solid black; page-break-inside: avoid;"
                                                   class="table-borderless">
                                                <tr>
                                                    <td style="padding-left: 3px;padding-bottom: 5px;">
                                                        <strong>BANK NAME:
                                                        </strong>
                                                        <span t-field="company.bank_name"/>

                                                    </td>
                                                    <!--                                                    <td align="left" style="padding-bottom: 5px;">-->
                                                    <!--                                                        <span t-field="company.bank_name"/>-->
                                                    <!--                                                    </td>-->
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 3px;padding-bottom: 5px;">
                                                        <strong>ACCOUNT NUMBER:</strong>
                                                        <span t-field="company.account_no"/>
                                                    </td>
                                                    <!--                                                    <td align="left" style="padding-left: 3px;padding-bottom: 5px;">-->
                                                    <!--                                                        <span t-field="company.account_no"/>-->
                                                    <!--                                                    </td>-->
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 3px;padding-bottom: 5px;">
                                                        <strong>IBAN NUMBER:</strong>
                                                        <span t-field="company.iban_number"/>
                                                    </td>
                                                    <!--                                                    <td align="left" style="padding-left: 3px;padding-bottom: 5px;">-->

                                                    <!--                                                    </td>-->
                                                </tr>
                                                <tr>
                                                    <td style="padding-left: 3px;padding-bottom: 5px;">
                                                        <strong>BENEFICIARY NAME:</strong>
                                                        <span t-field="company.ben_no"/>
                                                    </td>
                                                    <!--                                                    <td align="left" style="padding-left: 3px;padding-bottom: 5px;">-->
                                                    <!--                                                        <span t-field="company.ben_no"/>-->
                                                    <!--                                                    </td>-->
                                                </tr>

                                            </table>
                                            <table style="width: 15%; page-break-inside: avoid;">
                                                <tr>
                                                    <td></td>
                                                </tr>
                                            </table>

                                            <table align="right"
                                                   style="border: 2px solid black;width: 30%; page-break-inside: avoid;">
                                                <tr>
                                                    <td style="text-align: center;text-decoration: underline; font-size: 12px;white-space: nowrap;padding-bottom: 95px;padding-top: 3px;padding-right:10px;padding-left:10px;">
                                                        <strong>RECEIVER'S NAME, SIGNATURE AND STAMP</strong>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </xpath>
    </template>
    <record id="account.account_invoices" model="ir.actions.report">
        <field name="paperformat_id" ref="bt_tax_invoice_report.paperformat_tax_invoice"/>

    </record>

</odoo>



